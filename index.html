<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>DATAPLUS GH</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-firestore-compat.js"></script>

<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');

:root {
  --bg: radial-gradient(circle at top, #0f172a, #020617);
  --glass: rgba(255,255,255,0.08);
  --border: rgba(255,255,255,0.15);
  --text: #e5e7eb;
  --muted: #94a3b8;
  --accent: #38bdf8;
}

.light {
  --bg: linear-gradient(180deg, #f8fafc, #e2e8f0);
  --glass: rgba(255,255,255,0.8);
  --border: rgba(0,0,0,0.08);
  --text: #020617;
  --muted: #475569;
  --accent: #2563eb;
}

* {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: Inter, system-ui, sans-serif;
  background: var(--bg);
  color: var(--text);
  min-height: 100vh;
}

/* ANNOUNCEMENT */
#announcement {
  display: none;
  padding: 10px;
  text-align: center;
  background: linear-gradient(90deg, #38bdf8, #6366f1);
  color: #020617;
  font-weight: 600;
}

/* HEADER */
header {
  padding: 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

header strong {
  font-size: 20px;
  letter-spacing: 0.5px;
}

.toggle {
  background: var(--glass);
  border: 1px solid var(--border);
  color: var(--text);
  padding: 8px 12px;
  border-radius: 999px;
  cursor: pointer;
}

/* LAYOUT */
.container {
  max-width: 960px;
  margin: auto;
  padding: 20px;
}

/* GLASS CARD */
.card {
  background: var(--glass);
  border: 1px solid var(--border);
  backdrop-filter: blur(12px);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 16px;
}

/* PRODUCT */
.card h3 {
  margin: 0 0 6px;
}

.price {
  color: var(--accent);
  font-weight: 600;
}

/* BUTTON */
button {
  background: linear-gradient(135deg, var(--accent), #6366f1);
  color: #020617;
  border: none;
  padding: 10px 16px;
  border-radius: 10px;
  cursor: pointer;
  font-weight: 600;
  margin-top: 10px;
}

/* ADMIN INPUTS */
input, select {
  width: 100%;
  padding: 10px;
  border-radius: 10px;
  border: 1px solid var(--border);
  background: transparent;
  color: var(--text);
  margin-bottom: 10px;
}

/* AD BANNER */
.ad {
  text-align: center;
  border: 1px dashed var(--accent);
}

/* FOOTER */
footer {
  margin-top: 40px;
  padding: 30px 20px;
  background: rgba(0,0,0,0.25);
}

footer p {
  color: var(--muted);
}

/* WHATSAPP */
.whatsapp {
  position: fixed;
  right: 20px;
  bottom: 20px;
  background: #25d366;
  color: white;
  padding: 14px 18px;
  border-radius: 999px;
  text-decoration: none;
  font-weight: 700;
}
</style>
</head>

<body>

<div id="announcement"></div>

<header>
  <strong>DATAPLUS GH</strong>
  <button class="toggle" onclick="toggleTheme()">üåì</button>
</header>

<div class="container" id="app">Loading‚Ä¶</div>

<div class="container">
  <div class="card ad">
    <h3>üöÄ Custom Website Development</h3>
    <p><strong>WANT CUSTOM WEBSITES JUST LIKE THIS FOR YOUR BUSINESS?</strong></p>
    <p class="price">GET ONE FOR AS LOW AS GHC 180 ONLY</p>
    <a href="https://wa.me/233554222103" target="_blank">
      <button>Chat on WhatsApp</button>
    </a>
  </div>
</div>

<footer>
  <div class="container">
    <h3>KAYSAM GROWTH</h3>
    <p>üìû 0554222103 / 0532942413</p>
    <p>üìß kaysamgrowth@gmail.com</p>
    <p>üìç Near the All Nations University, Koforidua</p>
    <p style="font-size:12px;">¬© <span id="year"></span></p>
  </div>
</footer>

<a class="whatsapp"
   href="https://whatsapp.com/channel/0029VbBxGK6KrWR2RGMUlm1Z"
   target="_blank">
  WhatsApp
</a>

<script>
document.getElementById("year").textContent =
  new Date().getFullYear();

/* FIREBASE */
firebase.initializeApp({
  apiKey: "AIzaSyCs7lN4itvWZPichtFLdEE4swNQHSX_j1M",
  authDomain: "dataplus-a93c7.firebaseapp.com",
  projectId: "dataplus-a93c7",
  storageBucket: "dataplus-a93c7.appspot.com",
  messagingSenderId: "1040979049946",
  appId: "1:1040979049946:web:d5d7957a6c209f56dd94e3"
});

const auth = firebase.auth();
const db = firebase.firestore();
const ADMIN_UID = "ANwgaBBGe2fLyom7yzujdzQAY1k1";
let isAdmin = false;

/* THEME */
if (localStorage.theme === "light") {
  document.body.classList.add("light");
}
function toggleTheme() {
  document.body.classList.toggle("light");
  localStorage.theme =
    document.body.classList.contains("light") ? "light" : "dark";
}

/* AUTH */
auth.signInAnonymously();
auth.onAuthStateChanged(user => {
  if (!user) return;
  isAdmin = user.uid === ADMIN_UID;
  loadProducts();
});

/* ANNOUNCEMENTS */
db.collection("config").doc("app").onSnapshot(doc => {
  if (!doc.exists) return;
  const d = doc.data();
  const bar = document.getElementById("announcement");
  bar.style.display = d.announcementActive ? "block" : "none";
  bar.textContent = d.announcementText || "";
});

/* PRODUCTS */
async function loadProducts() {
  const snap = await db.collection("products")
    .where("active", "==", true).get();

  let html = "";
  snap.forEach(doc => {
    const p = doc.data();
    html += `
      <div class="card">
        <h3>${p.name}</h3>
        <p class="price">GHS ${p.price}</p>
        ${
          p.category === "physical"
          ? `<a href="${p.buyLink}" target="_blank"><button>Buy Item</button></a>`
          : `<button onclick="order('${doc.id}','${p.name}',${p.price})">Buy Data</button>`
        }
      </div>`;
  });

  if (isAdmin) html += adminPanel();
  document.getElementById("app").innerHTML = html;
}

/* ORDER */
function order(id, name, price) {
  const phone = prompt("Enter phone number");
  const ref = prompt("Enter MoMo reference");
  if (!phone || !ref) return;

  db.collection("orders").add({
    productId: id,
    productName: name,
    price,
    phone,
    momoRef: ref,
    status: "Pending Approval",
    createdAt: firebase.firestore.FieldValue.serverTimestamp()
  });

  alert("Order submitted");
}

/* ADMIN */
function adminPanel() {
  return `
    <div class="card">
      <h3>Admin Panel</h3>
      <input id="pname" placeholder="Product name">
      <input id="pprice" placeholder="Price">
      <select id="pcat">
        <option value="data">Data</option>
        <option value="physical">Physical</option>
      </select>
      <input id="plink" placeholder="Buy link (physical only)">
      <button onclick="addProduct()">Add Product</button>
      <hr>
      <button onclick="loadOrders()">View Orders</button>
      <div id="orders"></div>
    </div>`;
}

function addProduct() {
  db.collection("products").add({
    name: pname.value,
    price: Number(pprice.value),
    category: pcat.value,
    buyLink: plink.value || "",
    active: true,
    createdAt: firebase.firestore.FieldValue.serverTimestamp()
  });
  loadProducts();
}

async function loadOrders() {
  const snap = await db.collection("orders").get();
  let html = "";
  snap.forEach(doc => {
    const o = doc.data();
    html += `
      <div class="card">
        <strong>${o.productName}</strong>
        <p>${o.phone}</p>
        <p>${o.status}</p>
        <button onclick="approve('${doc.id}')">Approve</button>
      </div>`;
  });
  document.getElementById("orders").innerHTML = html;
}

function approve(id) {
  db.collection("orders").doc(id).update({ status: "Approved" });
  loadOrders();
}
</script>

</body>
                                      </html>
